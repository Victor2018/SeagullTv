package com.victor.adapter;import android.content.Context;import android.graphics.Bitmap;import android.graphics.drawable.BitmapDrawable;import android.graphics.drawable.Drawable;import android.support.v4.view.PagerAdapter;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import com.bumptech.glide.Glide;import com.victor.model.data.GankInfo;import com.victor.seagull.R;import com.victor.util.BitmapUtil;import com.victor.util.Loger;import com.victor.widget.PinchImageView;import java.util.List;import butterknife.OnClick;/** * Created by victor on 2017/5/9. */public class GankDetailAdapter extends PagerAdapter{    private Context mContext;    private List<GankInfo> datas;    private LayoutInflater layoutInflater;    private View mCurrentView;    private View.OnClickListener mOnClickListener;    public void setDatas(List<GankInfo> datas) {        this.datas = datas;    }    public List<GankInfo> getDatas() {        return datas;    }    public GankDetailAdapter(Context context) {        mContext = context;        layoutInflater = LayoutInflater.from(mContext);    }    public void setOnImgClickListener (View.OnClickListener listener) {        mOnClickListener = listener;    }    @Override    public int getCount() {        return datas == null ? 0 : datas.size();    }    @Override    public void setPrimaryItem(ViewGroup container, int position, Object object) {        super.setPrimaryItem(container, position, object);        mCurrentView = (View) object;    }    public Bitmap getCurrentView() {        PinchImageView pinchImageView= (PinchImageView) mCurrentView.findViewById(R.id.iv_img);        Drawable drawable = pinchImageView.getDrawable();        Bitmap bm = BitmapUtil.drawableToBitmap(drawable);        return bm;    }    @Override    public View instantiateItem(ViewGroup container, int position) {        final String imageUrl = datas.get(position).getUrl();        View view = layoutInflater.inflate(R.layout.gank_detail_item, container, false);        PinchImageView imageView = (PinchImageView) view.findViewById(R.id.iv_img);        imageView.setOnClickListener(mOnClickListener);        Glide.with(mContext)                .load(imageUrl)                .thumbnail(0.2f)                .into(imageView);        container.addView(view);        return view;    }    @Override    public void destroyItem(ViewGroup container, int position, Object object) {        container.removeView((View) object);    }    @Override    public boolean isViewFromObject(View view, Object object) {        return view == object;    }}